"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}var Hero=function(){function t(){var e;_classCallCheck(this,t),this.$el=document.querySelector(".hero"),this.$el&&(this.name=this.$el.getAttribute("data-name").toLowerCase(),this.$likeBtn=this.$el.querySelector(".hero__buttonLike"),this.$dislikeBtn=this.$el.querySelector(".hero__buttonDislike"),this.$likeBar=this.$el.querySelector(".bar__like"),this.$likeBarText=this.$likeBar.querySelector(".bar__number"),this.$dislikeBar=this.$el.querySelector(".bar__dislike"),this.$dislikeBarText=this.$dislikeBar.querySelector(".bar__number"),this.$voteEl=this.$el.querySelector(".hero__vote"),e=JSON.parse(localStorage.getItem(this.name))||{},this.likes=e.likes||0,this.dislikes=e.dislikes||0,this.votes=e.votes||0,this.addEvents(),this.updateBar(),this.persistHero())}return _createClass(t,[{key:"addEvents",value:function(){var e=this;this.$likeBtn&&this.$likeBtn.addEventListener("click",function(){e.likes+=1,e.votes+=1,e.updateBar(),e.$voteEl.classList.add("hero__vote-like"),e.persistHero()}),this.$dislikeBtn&&this.$dislikeBtn.addEventListener("click",function(){e.dislikes+=1,e.votes+=1,e.updateBar(),e.$voteEl.classList.add("hero__vote-dislike"),e.persistHero()})}},{key:"persistHero",value:function(){localStorage&&localStorage.setItem(this.name,JSON.stringify({likes:this.likes,dislikes:this.dislikes,votes:this.votes}))}},{key:"calculateVotes",value:function(e,t){return 0===e?50:0===t?0:(t/e*100).toFixed(1)}},{key:"updateBar",value:function(){var e=this.calculateVotes(this.votes,this.likes),t=this.calculateVotes(this.votes,this.dislikes),e="".concat(e,"%"),t="".concat(t,"%");this.$likeBar.style.width=e,this.$likeBarText.innerHTML=e,this.$dislikeBar.style.width=t,this.$dislikeBarText.innerHTML=t}}]),t}(),hero=new Hero;